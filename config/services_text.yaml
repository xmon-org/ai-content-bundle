# Text provider and service
# This file is loaded when text generation is configured

services:
    _defaults:
        autowire: true
        autoconfigure: true

    # Text Provider (Pollinations)
    Xmon\AiContentBundle\Provider\Text\PollinationsTextProvider:
        arguments:
            $apiKey: null
            $model: 'gemini'
            $fallbackModels: []
            $retriesPerModel: 2
            $retryDelay: 3
            $timeout: 60
            $endpointMode: 'openai'
        tags:
            - { name: 'monolog.logger', channel: 'ai' }

    # Main Text Service
    Xmon\AiContentBundle\Service\AiTextService:
        arguments:
            $provider: '@Xmon\AiContentBundle\Provider\Text\PollinationsTextProvider'
            $taskConfigService: '@Xmon\AiContentBundle\Service\TaskConfigService'
        tags:
            - { name: 'monolog.logger', channel: 'ai' }
